#!/bin/sh
# shellcheck disable=SC2015,SC2059,SC2048
IFS=""; c=$(while read -r p || [ -n "$p" ]; do
  printf "%s\\n" "$p"
done <&0) # set contents of stdin to a string to allow for \n replacement
r="$1"; d="$2";[ ! "${r##\\*}" ] && {
  # the following is intended
  set -f; IFS=$(printf "\\$r"); set +f; true
} || { IFS="${r}"; } # handle escapes
set -- "$c" # turn contents of stdin into arg list
for i in $*; do # $* is intended
  [ ! "$e" ] && { e="$i";:; } || { e="$e$d$i";:; }
done; printf "%s\\n" "$e"
